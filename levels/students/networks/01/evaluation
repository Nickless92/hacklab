#!/bin/bash

# SPDX-FileCopyrightText: 2022 Bassam-Khaled Thiab <inf3891@hs-worms.de>
# SPDX-FileCopyrightText: 2022 Dominic Meyer <inf3644@hs-worms.de>
# SPDX-FileCopyrightText: 2022 Felix Rheinheimer <felix.rheinheimer@hs-worms.de>
# SPDX-FileCopyrightText: 2022 Jean-Arole Fotsing <inf3608@hs-worms.de>
# SPDX-FileCopyrightText: 2022 Katrin Vollhardt <inf3493@hs-worms.de>
# SPDX-FileCopyrightText: 2022 Steve Landry Tchamabe <infXXXX@hs-worms.de>
# SPDX-FileCopyrightText: 2022 Syed Saad-Ullah <inf3664@hs-worms.de>
# SPDX-FileCopyrightText: 2022 Thierry-Junior Djeutchou-Njieyong <inf3494@hs-worms.de>
#
# SPDX-License-Identifier: GPL-3.0-or-later

# determine if the attack was successful + award points

packets=$(grep -c "10.2.1.3 â†’ 10.2.1.2     ICMP 42 Echo (ping) reply" ausgabe.log)  # determine if the correct packets was sent with the correct IP-adress
test=$(grep -c "ICMP 42" ausgabe.log)												# determine if the correct packets was sent

if [ $packets -eq 7 ]; then
    points=10
	print_colored_ascii ../../../../ressources/ascii/win.txt
    echo "Wow! Mission accomplished. 10 points.\n"
elif [ $packets -ne 7 ] && [ $test -ne 0 ]; then
    points=7
	print_colored_ascii ../../../../ressources/ascii/insufficient.txt
	echo "You didn't send the requested number of packet. But still, you get 7 points for that!"
    [ $packets -lt 7 ] && echo "You only sent $packets packets. Try again.\n"
    [ $packets -gt 7 ] && echo "You already sent $packets packets. Try again.\n"
else 
    points=0
	print_colored_ascii ../../../../ressources/ascii/lost.txt
    echo "Sorry, but you didn't fulfill the task at hand. 0 points, sorry. Try again!\n"
fi

>ausgabe.log                                                                        # clean up the file 
